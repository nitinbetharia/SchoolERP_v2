<!-- Footer - Fully Responsive -->
<footer class="bg-white border-t border-gray-200 mt-auto">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
            <!-- Brand Column -->
            <div class="col-span-1 md:col-span-2">
                <!-- Logo -->
                <div class="flex items-center mb-4">
                    <% if (locals.trust?.logo) { %>
                        <img class="h-8 w-8" src="<%= locals.trust.logo %>" alt="<%= locals.trust.name %> Logo">
                    <% } else { %>
                        <div class="h-8 w-8 bg-tenant-primary rounded-lg flex items-center justify-center">
                            <span class="text-white font-bold text-sm">ERP</span>
                        </div>
                    <% } %>
                    <span class="ml-3 text-lg font-semibold text-gray-900">
                        <%= locals.trust?.name || 'School ERP' %>
                    </span>
                </div>
                
                <p class="text-gray-600 text-sm sm:text-base leading-relaxed mb-4">
                    Comprehensive school management system designed to streamline administrative tasks, 
                    enhance communication, and improve educational outcomes.
                </p>
                
                <!-- Trust Information -->
                <% if (locals.trust?.settings) { %>
                    <div class="text-sm text-gray-500 space-y-1">
                        <% if (locals.trust.settings.established_year) { %>
                            <p>Established: <%= locals.trust.settings.established_year %></p>
                        <% } %>
                        <% if (locals.trust.settings.registration_number) { %>
                            <p>Registration: <%= locals.trust.settings.registration_number %></p>
                        <% } %>
                    </div>
                <% } %>
            </div>

            <!-- Quick Links -->
            <div>
                <h3 class="text-sm font-semibold text-gray-900 tracking-wider uppercase mb-4">Quick Links</h3>
                <ul class="space-y-3">
                    <% if (locals.perms?.dashboard?.view) { %>
                        <li><a href="/dashboard" class="text-gray-600 hover:text-tenant-primary text-sm transition-colors duration-200">Dashboard</a></li>
                    <% } %>
                    <% if (locals.perms?.student?.view) { %>
                        <li><a href="/students" class="text-gray-600 hover:text-tenant-primary text-sm transition-colors duration-200">Students</a></li>
                    <% } %>
                    <% if (locals.perms?.fees?.view) { %>
                        <li><a href="/fees" class="text-gray-600 hover:text-tenant-primary text-sm transition-colors duration-200">Fees</a></li>
                    <% } %>
                    <% if (locals.perms?.attendance?.view) { %>
                        <li><a href="/attendance" class="text-gray-600 hover:text-tenant-primary text-sm transition-colors duration-200">Attendance</a></li>
                    <% } %>
                    <% if (locals.perms?.reports?.view) { %>
                        <li><a href="/reports" class="text-gray-600 hover:text-tenant-primary text-sm transition-colors duration-200">Reports</a></li>
                    <% } %>
                </ul>
            </div>

            <!-- Support -->
            <div>
                <h3 class="text-sm font-semibold text-gray-900 tracking-wider uppercase mb-4">Support</h3>
                <ul class="space-y-3">
                    <li><a href="/help" class="text-gray-600 hover:text-tenant-primary text-sm transition-colors duration-200">Help Center</a></li>
                    <li><a href="/contact" class="text-gray-600 hover:text-tenant-primary text-sm transition-colors duration-200">Contact Us</a></li>
                    <li><a href="/support" class="text-gray-600 hover:text-tenant-primary text-sm transition-colors duration-200">Technical Support</a></li>
                    <li><a href="/training" class="text-gray-600 hover:text-tenant-primary text-sm transition-colors duration-200">Training Resources</a></li>
                </ul>
                
                <!-- Contact Information -->
                <div class="mt-6 space-y-2">
                    <% if (locals.trust?.settings?.support_phone) { %>
                        <div class="flex items-center text-sm text-gray-600">
                            <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
                            </svg>
                            <a href="tel:<%= locals.trust.settings.support_phone %>" class="hover:text-tenant-primary transition-colors duration-200">
                                <%= locals.trust.settings.support_phone %>
                            </a>
                        </div>
                    <% } %>
                    
                    <% if (locals.trust?.settings?.support_email) { %>
                        <div class="flex items-center text-sm text-gray-600">
                            <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
                                <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
                            </svg>
                            <a href="mailto:<%= locals.trust.settings.support_email %>" class="hover:text-tenant-primary transition-colors duration-200">
                                <%= locals.trust.settings.support_email %>
                            </a>
                        </div>
                    <% } %>
                </div>
            </div>
        </div>

        <!-- Bottom Section -->
        <div class="mt-8 pt-8 border-t border-gray-200">
            <div class="flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0">
                <!-- Copyright -->
                <div class="text-sm text-gray-500 text-center sm:text-left">
                    <p>
                        Â© <%= new Date().getFullYear() %> <%= locals.trust?.name || 'School ERP' %>. All rights reserved.
                    </p>
                    <p class="mt-1">
                        Powered by 
                        <a href="https://schoolerp.com" class="text-tenant-primary hover:text-tenant-secondary transition-colors duration-200" target="_blank" rel="noopener noreferrer">
                            School ERP System
                        </a>
                    </p>
                </div>

                <!-- Legal Links -->
                <div class="flex flex-wrap justify-center sm:justify-end space-x-6 text-sm">
                    <a href="/privacy" class="text-gray-500 hover:text-tenant-primary transition-colors duration-200">Privacy Policy</a>
                    <a href="/terms" class="text-gray-500 hover:text-tenant-primary transition-colors duration-200">Terms of Service</a>
                    <a href="/cookies" class="text-gray-500 hover:text-tenant-primary transition-colors duration-200">Cookie Policy</a>
                </div>
            </div>

            <!-- System Information (for authenticated users) -->
            <% if (locals.user && process.env.NODE_ENV === 'development') { %>
                <div class="mt-4 pt-4 border-t border-gray-100 text-xs text-gray-400 font-mono">
                    <div class="flex flex-wrap gap-4">
                        <span>Build: <%= process.env.APP_VERSION || '1.0.0' %></span>
                        <span>Environment: <%= process.env.NODE_ENV || 'development' %></span>
                        <span>Trust: <%= locals.trust?.slug %></span>
                        <span>User: <%= locals.user.role %></span>
                    </div>
                </div>
            <% } %>
        </div>
    </div>
</footer>

<!-- Scroll to top button -->
<button 
    id="scroll-to-top" 
    class="fixed bottom-6 right-6 bg-tenant-primary text-white p-3 rounded-full shadow-lg hover:bg-tenant-secondary transition-all duration-300 transform translate-y-16 opacity-0 z-40"
    onclick="scrollToTop()"
    aria-label="Scroll to top"
>
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" />
    </svg>
</button>

<script>
    // Scroll to top functionality
    function scrollToTop() {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    }

    // Show/hide scroll to top button
    window.addEventListener('scroll', function() {
        const scrollButton = document.getElementById('scroll-to-top');
        if (window.pageYOffset > 300) {
            scrollButton.classList.remove('translate-y-16', 'opacity-0');
            scrollButton.classList.add('translate-y-0', 'opacity-100');
        } else {
            scrollButton.classList.add('translate-y-16', 'opacity-0');
            scrollButton.classList.remove('translate-y-0', 'opacity-100');
        }
    });

    // Improved accessibility for footer links
    document.addEventListener('DOMContentLoaded', function() {
        const footerLinks = document.querySelectorAll('footer a');
        footerLinks.forEach(link => {
            if (link.hostname !== window.location.hostname && !link.hasAttribute('target')) {
                link.setAttribute('target', '_blank');
                link.setAttribute('rel', 'noopener noreferrer');
                
                // Add external link indicator
                const externalIcon = document.createElement('svg');
                externalIcon.className = 'inline w-3 h-3 ml-1';
                externalIcon.innerHTML = '<path fill="currentColor" d="M14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3m-2 16H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7h-2v7Z"/>';
                link.appendChild(externalIcon);
            }
        });
    });
</script>